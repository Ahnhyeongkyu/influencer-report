# PROJECT_PLAN.md

## 프로젝트 정보
- **프로젝트명:** 멀티플랫폼 인플루언서 캠페인 성과 리포트 자동화 시스템
- **도메인:** bot
- **마감:** 2026.01.16 (착수금 결제일 01/06 + 10일)
- **시작일:** 2026.01.09
- **고객:** 픽스업
  - 정해민: 프로젝트 담당자 (소통 창구)
  - 픽스업_최봉석: 관리자 (실제 프로그램 사용자, 테스트 담당)
  - 배진환: (초기 연락)
- **GitHub 레포:** FixUp-system/Report-fixtab.git (collaborator 초대 완료)
- **Streamlit Cloud URL:** https://report-fixtab-k8k7g5yfunqmajj87vmp7s.streamlit.app/

---

## 계약 상세

### 최종 계약
- **선택 옵션:** 5개 플랫폼 통합
- **계약 금액:** 110만원
- **결제 방식:** 착수금/잔금 분할 (숨고페이)
  - 착수금: 55만원 (2026.01.06 오전 10:45 결제 완료)
  - 잔금: 55만원 (대기 중)
- **AS 기간:** 2개월 (2026.03.16까지)

### 계약 범위
**범위 내:**
- 5개 플랫폼 크롤링 (YouTube, Instagram, Facebook, Dcard, Xiaohongshu)
- 캠페인 성과 PDF 리포트 자동 생성
- Streamlit 웹 UI
- 기본 수치 수집 (좋아요, 댓글 수, 조회수, 공유 수, 작성자)

**범위 외 (서비스로 제공):**
- 썸네일 이미지 수집 및 리포트 반영
- 댓글 내용 수집 기능
- URL 목록 섹션

---

## 현재 상태 (2026.02.08)

### Phase: v1.7.3 전체 검증 완료 - 최종 전달 준비

---

## 전달 이력

| 버전 | 날짜 | 내용 | 결과 |
|-----|------|------|------|
| v1.0 | 01.14 | 최초 로컬 실행 버전 | 설치.bat 바로 종료됨 |
| v1.1 | 01.14 | bat 수정, 샤오홍슈 JSON, PDF 포맷 | 버그 발견 |
| v1.2 | 01.16 | JSON 패턴 추출, 로그인 간소화 | 버그 발견 |
| v1.2.1 | 01.16 | 인증 모드 브라우저 버그 수정 | 전달 완료 |
| v1.4.0 | 01.19 | Instagram 문제 해결 + 전체 검증 | 전달 → 피드백 1차 |
| v1.2.6 | 01.21 | 인코딩/내용/썸네일/댓글 수정 | 전달 → 피드백 2-3차 |
| v1.5.2 | 01.27 | FB 작성자 URL, 썸네일 비활성화 | 전달 → 피드백 추가 |
| v1.5.5 | 01.29 | 지표 표시 개선 | 전달 완료 |
| v1.5.8 | 01.31 | 전체 수정 + FB engagement 정확도 | 전달 완료 |
| v1.7.0 | 02.04 | 5차 피드백 11건 전수 수정 | 내부 검증 |
| v1.7.1 | 02.05 | 실제 크롤링 검증 + 추가 수정 | 검증 완료 |
| **v1.7.3** | **02.06** | **전체 5플랫폼 통합 검증 (17개)** | **전달 준비** |

---

## v1.7.3 최종 검증 완료 (2026.02.06)

### 수정 내역 (v1.7.0~v1.7.3)
1. 5차 피드백 11건 전수 수정
2. CSV content 컬럼 caption/description fallback
3. 같은 작성자 덮어쓰기 방지 (중복 감지 + 재크롤링)
4. Excel 댓글 시트 추가
5. 샤오홍슈 content 추출 패턴 추가
6. 페이스북 댓글/썸네일/좋아요 수정 + DOM 2026 대응
7. 인스타그램 댓글 작성자 매핑
8. 디카드 유니코드 깨짐 수정

### 검증 결과 (5플랫폼 17개 콘텐츠)
| 플랫폼 | URL수 | 성공 |
|--------|-------|------|
| YouTube | 2 | 2/2 |
| Instagram | 3 | 3/3 |
| Facebook | 4 | 4/4 |
| Dcard | 3 | 3/3 |
| XHS | 5 | 5/5 |

### GitHub
- Commit: fff647a (public/main branch)

---

## 고객 피드백 이력

### 1차 피드백 (최봉석, 01.19)
| # | 문제 | 책임 | 해결 버전 |
|---|------|------|----------|
| 1 | 인스타그램 인코딩 깨짐 | 우리 잘못 | v1.2.6 |
| 2 | 페이스북 인코딩 깨짐 | 우리 잘못 | v1.2.6 |
| 3 | 디카드 내용 누락 | 우리 잘못 | v1.2.6 |
| 4 | 샤오홍슈 불완전 | 우리 잘못 | v1.2.6 |
| 5 | 조회수 안내 없음 | 우리 잘못 | v1.2.6 |
| 6 | 재수집 기능 없음 | 우리 잘못 | v1.2.6 |
| 7 | 썸네일 이미지 | 추가 요청 (범위 외) | v1.2.6 |
| 8 | 댓글 내용 수집 | 추가 요청 (범위 외) | v1.2.6 |

### 2차 피드백 (최봉석, 01.21)
| # | 문제 | 해결 버전 |
|---|------|----------|
| 1 | 샤오홍슈 내용/댓글 수집 안됨 | v1.2.7 |
| 2 | 페이스북 썸네일 잘못됨 | v1.2.8 |
| 3 | 페이스북 댓글 작성자 @user | v1.2.8 |
| 4 | 페이스북 내용 수집 안됨 | v1.2.8 |
| 5 | 디카드 차단 | v1.2.8 |
| 6 | 보고서 썸네일 크기 | v1.2.7 |
| 7 | 보고서 URL/내용 | v1.2.7 |

### 3차 피드백 (최봉석, 01.26)
| # | 문제 | 해결 버전 |
|---|------|----------|
| 1 | FB share/v URL 좋아요 0 | v1.5.7 |
| 2 | 인스타 중복 데이터 | v1.5.7 |
| 3 | 디카드 연속 차단 | v1.5.7 |
| 4 | 조회수 "수집 불가" 일괄 표시 | v1.5.8 |

---

## 플랫폼별 동작 방식

| 플랫폼 | 라이브러리 | 인증 | 특이사항 |
|--------|-----------|------|----------|
| YouTube | yt-dlp | 불필요 | 가장 안정적 |
| Instagram | undetected-chromedriver | 불필요* | JSON 패턴 추출, URL 검증 |
| Facebook | undetected-chromedriver | 불필요* | engagement 교차검증, 세션 재사용 |
| Dcard | cloudscraper + nodriver | 불필요 | API 실패 시 fallback, 8초 딜레이 |
| Xiaohongshu | Selenium | QR 로그인 | 앱 스캔 필요, 쿠키 저장 |

*쿠키 없이도 작동하지만, 일부 제한된 콘텐츠는 로그인 필요할 수 있음

---

## 다음 작업

1. [x] v1.5.8 전달 완료 (2026.01.31)
2. [x] GitHub push 완료 (commit dbae6eb)
3. [x] 5차 피드백 11건 전수 수정 (v1.7.0, 02.04)
4. [x] 실제 크롤링 검증 완료 (v1.7.1, 02.05)
5. [x] 전체 5플랫폼 통합 검증 (v1.7.3, 02.06)
6. [x] GitHub push 완료 (commit fff647a)
7. [x] 사용 매뉴얼 v1.7.3 + Mac 지원 업데이트
8. [ ] CEO 메시지 확인 후 고객 전달
9. [ ] 고객 반응 대기 (수락 or 법적 대응)
10. [ ] 잔금 55만원 수령 또는 법적 절차 진행
11. [ ] 완료 시 /archive 실행

---

## 결제 상태

| 항목 | 금액 | 상태 | 날짜 |
|-----|-----|-----|-----|
| 착수금 | 55만원 | ✅ 완료 | 2026.01.06 |
| 잔금 | 55만원 | ⏳ 대기 | - |
| **합계** | **110만원** | | |

---

## 고객 로그인 정보
- 아이디: (환경변수 APP_USERNAME 참조)
- 비밀번호: (환경변수 APP_PASSWORD 참조)

---

## 소통 방식

- **단체 카톡방:** 정해민, 픽스업_최봉석(관리자), CEO(안형규)
- **CEO 소통 원칙:** 텍스트 기반 소통

---

## 고객 대응 전략

### 잔금 확보 전략
- 고객 확인 완료 후 잔금 요청 (전달 메시지에는 잔금 언급 안 함)
- 범위 외 작업 3건 서비스 제공 기록 보존

### 추가 피드백 대응
- "이전 피드백에 없었던 새로운 항목"으로 프레이밍
- 계약 범위 내/외 구분하여 대응
- 사실 기반 소통, 과도한 사과 자제

### 분쟁 대비
- 정해민 "분쟁 절차" 언급 이력 (01.29)
- 모든 전달 메시지에 범위 내/외 구분 기록
- 범위 외 작업 서비스 제공 증거 보존

---

### 5차 피드백 (최봉석, 02.02)
| # | 문제 | 해결 버전 |
|---|------|----------|
| 1 | CSV 인코딩/content 누락 | v1.7.0 |
| 2 | 같은 작성자 덮어쓰기 | v1.7.0 |
| 3 | 삭제/접근불가 링크 | v1.7.0 |
| 4 | 엑셀 댓글 시트 | v1.7.0 |
| 5 | 샤오홍슈 내용 누락 | v1.7.0 |
| 6 | FB 댓글 항상 2개 | v1.7.0 |
| 7 | FB 썸네일 미수집 | v1.7.0 |
| 8 | FB 좋아요 이상 수치 | v1.7.0 |
| 9 | IG 댓글 "user" 표시 | v1.7.0 |
| 10 | Dcard 유니코드 깨짐 | v1.7.0 |
| 11 | 패키징/대응 | v1.7.0 |

---

## 마지막 업데이트
- **날짜:** 2026.02.08
- **상태:** v1.7.3 전체 검증 완료, 최종 전달 준비
- **GitHub:** commit fff647a (Ahnhyeongkyu/influencer-report.git, public/main)
- **AS 기간:** 2개월 (2026.03.16까지)
